---
title: "Data Table"
author: "Anni Liu"
date: '`r format(Sys.Date(), "%B %d, %Y")`'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Save and load images
```{r saveimage, eval=FALSE}
image.date <- format(Sys.Date(), "%Y%b%d")
save.image(file = paste0(image.date, "_datatable_image_ALiu.RData"))
```

```{r loadimage}
load("2023Feb11_datatable_image_ALiu.RData")
```


```{r}
library(data.table)
mydt <- fread("2022Dec21_dat_TNBC.csv")
class(mydt) # "data.table" "data.frame"

mydf <- read.csv("2022Dec21_dat_TNBC.csv")
class(mydf) # "data.frame"

mydt2 <- as.data.table(mydf)
class(mydt2)
```


```{r}
str(mydt)
# mydt[i, j, by]
# start with mydt, subset rows using `i`, calculate using `j`, and group by `by`.
```


# Subset the dataset by row
```{r}
myRes <- mydt[Race.Ethnicity2 == "WA" & Clinical.T.Stage2 == "T1|T2"]
myRes 

##------Basic operations------
# Select 1st to 6th row
mydt[1:6, ] # Equivalently; mydt[1:6]

# Select the penultimate row
mydt[.N-1]

# Return the number of rows
mydt[, .N]

# Select all rows that have value WA in the column `Race.Ethnicity2`
mydt[Race.Ethnicity2 == "WA"] 

# Select all rows that have value WA and AA in the column `Race.Ethnicity2`
mydt[Race.Ethnicity2 %in% c("WA", "AA")]
```



